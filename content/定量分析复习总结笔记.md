---
title: 定量分析复习总结笔记
category: FRM一级
tags: [FRM一级, 定量分析]
date: 2025-12-06
---
金融风险管理的本质，是用数学的语言去描述不确定性。复习笔记沿 **“描述数据 -> 寻找关系 -> 模拟预测 -> 前沿拓展”** 的逻辑脉络展开：
- **概率论与统计基础**：从随机变量分布出发，建立描述金融数据的基本语言，通过假设检验为决策提供统计学依据。
- **回归与时间序列**：从经典的线性回归到复杂的非平稳时间序列，剖析资产价格的波动规律与变量间的因果关系。
- **模拟与波动性**：利用蒙特卡洛模拟等手段解决，计算收益率、波动性和相关系数。
- **机器学习**：引入现代算法与评估体系，拓宽传统计量经济学的边界。


## 概率论

### 1. 概率论
- **概率的基本概念、计算**
$$P(A \cup B) = P(A) + P(B) - P(A \cap B)$$
$$
P(A \cap B) = P(A) \cdot P(B|A) = P(B) \cdot P(A|B)
$$
- **条件概率**
$$
P(A|B) = \frac{P(A∩B)}{P(B)},\quad P(B) > 0
$$
- **贝叶斯公式**
$$P(B_i|A) = \frac{P(A|B_i)P(B_i)}{\sum P(A|B_j)P(B_j)}$$
- **先验概率**：无额外信息时的概率；**后验概率**：获得新信息后更新的概率。
- **信息调整因子**：反映新信息对概率判断的影响；值远离1表示信息价值高
- **全概率公式**：若$B_1, B_2, \dots, B_n$是样本空间的一个划分，则：
$$
P(A) = \sum_{i=1}^n P(A|B_i) \cdot P(B_i)
$$

- **互斥与独立事件**
	- 互斥事件不能同时发生，$P(A ∩ B) = 0$。互斥事件**不是独立事件**
	- 独立事件互不影响，$P(A \cap B) = P(A) \cdot P(B)$或：$P(A|B) = P(A)$
	- 条件独立：在给定条件 C 下，A 与 B 独立：$P(A \cap B | C) = P(A|C) \cdot P(B|C)$

### 2. 统计指标
- **均值** $\mu$
- **期望** $E[X] = \sum x_i P(x_i)$或 $\int x f(x) dx$
- **方差** $\text{Var}(X) = E[X^2] - (E[X])^2$
- **标准差** $\sigma = \sqrt{\text{Var}(X)}$
- **标准化随机变量**，均值为0，标准差为1，便于不同数据集比较。
$$
X' = \frac{X - \mu}{\sigma}
$$
- **区间概率** $P(a \leq X \leq b) = F(b) - F(a)$
- **中心趋势**

| 度量  | 定义       | 特点      |
| --- | -------- | ------- |
| 均值  | 加权平均值    | 受极端值影响  |
| 中位数 | 50% 分位点  | 不受极端值影响 |
| 众数  | 出现频率最高的值 | 可有多峰    |
- **分位数**：给定概率 $\alpha$，求 $x$ 使得 $P(X \leq x) = \alpha$
- **逆 CDF**：$x = F^{-1}(\alpha)$
- **协方差**

| 项目  | 内容                                   |
| --- | ------------------------------------ |
| 定义  | $\text{Cov}(X,Y) = E[(X-EX)(Y-EY)]$  |
| 公式  | $\text{Cov}(X,Y) = E[XY] - E[X]E[Y]$ |
| 性质  | 有单位，取值范围：$(-\infty, +\infty)$        |
| 意义  | 正值为正相关，负值为负相关                        |
- **线性组合的方差**$$Var(aX+bY) = a^2Var(X) + b^2Var(Y) + 2abCov(X,Y)$$
- **协方差性质**
	- $\text{Cov}(X,X) = \text{Var}(X)$
	- $\text{Cov}(X,Y) = \text{Cov}(Y,X)$
	- $\text{Cov}(aX, bY) = ab\text{Cov}(X,Y)$
- **相关系数**

| 项目  | 内容                                                   |
| --- | ---------------------------------------------------- |
| 定义  | $$\rho = \frac{\text{Cov}(X,Y)}{\sigma_X \sigma_Y}$$ |
| 性质  | 无单位，取值范围：$[-1, 1]$                                   |
| 意义  | 衡量**线性关系**强度与方向                                      |

- 相关系数 = 0 ⇔ 无线性关系（但可能有非线性关系）
- 独立 ⇒ 相关系数 = 0， 相关系数 = 0 ⇏ 独立
- **偏度和峰度**

| 概念  | 含义    | 图形表现                    |
| --- | ----- | ----------------------- |
| 偏度  | 分布对称性 | 左偏：均值 < 中位数；右偏：均值 > 中位数 |
| 峰度  | 尾部厚度  | 高峰厚尾：极端事件概率高            |
- **独立同分布**：
	- 随机变量相互独立且服从同一分布
	- 均值：$E\left[\sum X_i\right] = n\mu$
	- 方差：$\text{Var}\left(\sum X_i\right) = n\sigma^2$
	- 协方差：$\text{Cov}(X_i, X_j) = 0$（当 $i \ne j$）
- **矩的定义**

| 类型   | 公式               | 说明            |
| ---- | ---------------- | ------------- |
| 非中心矩 | $E[X^k]$         | 直接求 $X^k$ 的期望 |
| 中心矩  | $E[(X - \mu)^k]$ | 减去均值后再求期望     |
- **常见矩与统计量**

| 阶数  | 名称  | 公式                                                      | 意义   |
| --- | --- | ------------------------------------------------------- | ---- |
| 一阶  | 均值  | $$E[X]$$                                                | 中心趋势 |
| 二阶  | 方差  | $$\text{Var}(X) = E[(X - \mu)^2]$$                      | 离散程度 |
| 三阶  | 偏度  | $$E\left[\left(\frac{X - \mu}{\sigma}\right)^3\right]$$ | 对称性  |
| 四阶  | 峰度  | $$E\left[\left(\frac{X - \mu}{\sigma}\right)^4\right]$$ | 尾部厚度 |


### 3. 常见随机变量分布
- **随机变量**：取值不确定的量，用大写字母 $X$ 表示
- **具体结果**：用小写字母 $x$ 表示
- **事件**：由随机变量与其取值共同描述

#### 3.1 分类 

| 类型  | 定义               | 例子         |
| - | - | - |
| 离散型 | 取值**可数**，有限或无限可列 | 掷骰子结果、头发根数 |
| 连续型 | 取值**不可数**，可无限细分  | 温度、股票价格    |
- **离散随机变量：PMF与CDF**

| 工具  | 全称     | 定义                   | 特点          |
| - | -- | -- | -- |
| PMF | 概率质量函数 | $P(X = x)$           | 描述取某个值的概率   |
| CDF | 累积分布函数 | $F(x) = P(X \leq x)$ | 阶梯状、非递减、右连续 |
- **连续随机变量：PDF 与 CDF**

| 工具  | 全称     | 定义                   | 特点            |
| - |-  | -- | - |
| PDF | 概率密度函数 | $f(x)$               | 面积表示概率，单点概率为0 |
| CDF | 累积分布函数 | $F(x) = P(X \leq x)$ | 连续递增，可导       |
- **CDF 与 PDF**：  
$$
  F(x) = \int_{-\infty}^{x} f(t) dt,\quad f(x) = \frac{d}{dx}F(x)
$$
- **区间概率**：  
$$
  P(a \leq X \leq b) = F(b) - F(a) = \int_a^b f(x)dx
$$
#### 3.2 一元随机变量分布
- **离散分布 - 伯努利分布 Bernoulli**

| 项目  | 内容                       |
| --- | ------------------------ |
| 定义  | 单次试验，成功概率 $P$，失败概率 $1-P$ |
| 取值  | $X = 0$ 或 $1$            |
| 均值  | $E[X] = P$               |
| 方差  | $\text{Var}(X) = P(1-P)$ |

- **离散分布 - 二项分布 Binomial**

| 项目  | 内容                                            |
| --- | --------------------------------------------- |
| 定义  | $n$ 次独立伯努利试验的成功次数 $X$                         |
| 公式  | $P(X=k) = C(n,k) \cdot P^k \cdot (1-P)^{n-k}$ |
| 均值  | $E[X] = nP$                                   |
| 方差  | $\text{Var}(X) = nP(1-P)$                     |


- **离散分布 - 泊松分布 Poisson**

| 项目  | 内容                                                             |
| --- | -------------------------------------------------------------- |
| 定义  | 描述单位时间内随机事件发生次数，适用于 $n$ 大 $P$ 小的情况。精度高于二项分布                    |
| 公式  | $$P(X=k) = \frac{\lambda^k e^{-\lambda}}{k!}，其中 \lambda = nP$$ |
| 均值  | $E[X] = \lambda$                                               |
| 方差  | $\text{Var}(X) = \lambda$                                      |

- **连续分布 - 连续均匀分布**

| 项目  | 内容                                   |
| --- | ------------------------------------ |
| 定义  | 在区间  $[A,B]$ 内均匀取值                   |
| PDF | $$f(x) = \frac{1}{B-A}，x \in [A,B]$$ |
| CDF | $$F(x) = \frac{x-A}{B-A}$$           |
| 均值  | $$\frac{A+B}{2}$$                    |
| 方差  | $$\frac{(B-A)^2}{12}$$               |

- **连续分布 - 正态分布**

| 项目    | 内容                                                                       |
| ----- | ------------------------------------------------------------------------ |
| 定义    | 对称分布，两端无限延伸                                                              |
| PDF   | $$f(x) = \frac{1}{\sigma\sqrt{2\pi}} e^{-\frac{(x-\mu)^2}{2\sigma^2}} $$ |
| 均值    | $\mu$                                                                    |
| 方差    | $\sigma^2$                                                               |
| 偏度    | 0                                                                        |
| 峰度    | 3                                                                        |
| 性质    | - 线性组合仍为正态<br>- 标准化：$Z = \frac{X-\mu}{\sigma} \sim N(0,1)$               |
| 关键分位点 | $Z_{0.025} = 1.96,\ Z_{0.05} = 1.65,\ Z_{0.01} = 2.33$                   |


- **连续分布 - 对数正态分布**

| 项目  | 内容                                 |
| --- | ---------------------------------- |
| 定义  | $Y = \ln X \sim N(\mu, \sigma^2)$  |
| 特点  | - $X > 0$<br>- 右偏<br>- 用于股票价格等非负变量 |
| 应用  | 金融期权定价（如 Black-Scholes 模型）         |
- **连续分布 - 卡方分布**

| 项目  | 内容                                     |
| --- | -------------------------------------- |
| 定义  | $\sum_{i=1}^k Z_i^2$，$Z_i \sim N(0,1)$ |
| 自由度 | $k$                                    |
| 均值  | $k$                                    |
| 方差  | $2k$                                   |
| 特点  | 非负、右偏                                  |

- **连续分布 - T分布**

| 项目  | 内容                                |
| --- | --------------------------------- |
| 定义  | $$T = \frac{Z}{\sqrt{\chi^2/k}}$$ |
| 自由度 | $k$                               |
| 均值  | 0                                 |
| 方差  | $$\frac{k}{k-2}（k>2）$$            |
| 特点  | 尾部厚于正态分布，适用于小样本                   |
- **连续分布 - F分布**

| 项目  | 内容                                            |
| --- | --------------------------------------------- |
| 定义  | $$F = \frac{\chi_1^2 / k_1}{\chi_2^2 / k_2}$$ |
| 自由度 | $k_1, k_2$                                    |
| 特点  | 非负、右偏，用于方差分析、回归检验                             |
- **分布之间的转换**

| 分布      | 转换条件                          |
| ------- | ----------------------------- |
| 二项 → 正态 | $nP \geq 10,\ n(1-P) \geq 10$ |
| 泊松 → 正态 | $\lambda \geq 1000$           |
| 二项 → 泊松 | $n$ 大，$P$ 小，$\lambda = nP$ 固定 |
 
#### 3.3 多元随机变量分布
- **多元随机变量**：两个或多个随机变量（如 $X, Y$）作为一个整体研究
- **研究重点**：变量之间的**依赖性**与**相关性**
- **应用形式**：$X+Y, X-Y, X\cdot Y$ 等组合
- **联合概率分布**：$P(X=x, Y=y)$ 表示 $X$ 和 $Y$ 同时取某值的概率。概率表或矩阵，所有联合概率之和为1
- **边际分布**：不考虑其他变量，单独研究一个变量的概率分布，对联合概率按行或列求和。
- **条件分布**：在已知 $X=x$ 的条件下，$Y$ 的分布。条件概率之和为1。
 $$
  P(Y=y | X=x) = \frac{P(X=x, Y=y)}{P(X=x)}
 $$
- **条件分布的期望值**
 $$
  E[Y|X=x] = \sum_y y \cdot P(Y=y | X=x)
 $$
 - **条件分布的方差**
 $$
  \text{Var}(Y|X=x) = E[Y^2|X=x] - (E[Y|X=x])^2
 $$
- **判断X与Y独立**：对所有 $x, y$ 都有：$P(X=x, Y=y) = P(X=x) \cdot P(Y=y)$
- 独立时：协方差为0，相关系数为0，$E[XY] = E[X]E[Y]$。


### 4. 采样和假设检验
#### 4.1 采样
- **采样**：从总体数据中抽取的部分样本数据
- **描述性统计**：描述数据特征（均值、方差等）
- **推断性统计**：通过样本推断总体特征
- **样本矩：**

|         | 含义   | 样本                                           | 总体                                          | 性质                                                        |
| ------- | ---- | -------------------------------------------- | ------------------------------------------- | --------------------------------------------------------- |
| **一阶矩** | 均值   | $$\bar{X} = \frac{\sum X_i}{n}$$             | $$\mu = \frac{\sum X_i}{N}$$                | 样本均值是总体均值的**无偏估计**                                        |
| **二阶矩** | 有偏方差 | $$S^2 = \frac{\sum (X_i - \bar{X})^2}{n}$$   | $$\sigma^2 = \frac{\sum (X_i - \mu)^2}{N}$$ |                                                           |
|         | 无偏方差 | $$S^2 = \frac{\sum (X_i - \bar{X})^2}{n-1}$$ |                                             | 计算样本方差时使用 $n-1$ 是因为样本均值占用了一个自由度                           |
| **三阶矩** | 偏度   | $$\frac{E[(X-\mu)^3]}{\sigma^3}$$            |                                             | 正偏（右偏）：均值 > 中位数 > 众数<br>负偏（左偏）：均值 < 中位数 < 众数<br>对称：偏度 = 0 |
| **四阶矩** | 峰度   | **正态分布峰度** = 3                               |                                             | **尖峰分布**：峰度 > 3<br>**矮峰分布**：峰度 < 3<br>**超额峰度** = 峰度 - 3   |
- **中位数**：数据排序后位于50%位置的数
- **四分位数Q1**：25%分位数
- **四分位数Q3**：75%分位数
- **IQR** = Q3 - Q1（中间50%数据的范围）
- **协方差**：衡量两个变量的线性关系
- **相关系数**：标准化的协方差，取值范围[-1,1]
#### 4.2 估计
- **估计量的评价标准**
- **BLUE标准**
	- **B**est：方差最小
	- **L**inear：线性估计量
	- **U**nbiased：无偏性（$E[\hat{\theta}] = \theta$）
	- **E**stimator：估计量
- **一致性**
	- 样本量增加时，估计量收敛于总体参数
	- 比无偏性更实际常用
- **大数定律**：样本容量增大时，样本均值趋近于总体均值
- **中心极限定理**：样本容量 $n \geq 30$时，样本均值的分布近似正态分布。均值：$\mu$。方差：$\sigma^2/n$。标准差：$\sigma/\sqrt{n}$
#### 4.3 假设检验
- **置信水平**与**显著性水平**互为补数（如95%置信水平对应5%显著性水平）。
- **标准误差**反映样本均值的波动性，是构建置信区间的关键。
- **检验步骤**：设假设→计算统计量→查临界值→决策
	1. **设立假设**：
		- 原假设（H₀）：通常包含等号，代表现状或已有结论。
		- 备择假设（Hₐ）：与原假设对立，表达研究者的怀疑。
	2. **计算检验统计量**：
		- 使用样本数据计算标准化统计量（如Z值、T值）。
	3. **设定显著性水平（α）**：
		- 常用α=5%，决定拒绝域的边界。
	4. **查找临界值**：
		- 根据α和分布类型（Z、T、卡方、F）查表。
	5. **做出决策**：
		- 比较统计量与临界值，决定是否拒绝H₀。
- **等号必须放在原假设**，是假设检验的“铁律”。
- 结论应表述为“拒绝H₀”或“不拒绝H₀”，**不应说“接受H₀”**。
- **错误类型**：第一类错误(α) vs 第二类错误(β)
	- **第一类错误（α）**：拒绝真实的H₀（“拒真”）。
	- **第二类错误（β）**：未拒绝错误的H₀（“存伪”）。
	- **检验效力（Power）** = 1 - β，反映正确拒绝错误H₀的能力。（Minimizing type II errors will maximize the power of the test）
	- **增加样本容量**可同时降低α和β。
- **单尾检验**：关注一个方向的差异（如μ > μ₀）。
- **双尾检验**：关注两个方向的差异（如μ ≠ μ₀）。
- **检验方法选择**：
	- Z检验：总体方差已知。
	- T检验：总体方差未知，用小样本。
	- 卡方检验：检验方差是否等于某常数。
	- F检验：比较两组数据的方差是否相等。
- **置信区间与假设检验的关系**
	- 若**总体参数落在置信区间内**，则**不拒绝H₀**。
	- 置信区间提供了参数的可能范围，与假设检验结论相互印证。
- **P值方法**：P值<α则拒绝H₀
	- **P值**：表示观察到的数据与原假设不一致的概率。
	- P值方法与传统方法结论一致，更直观。

## 回归和时间序列
### 1. 线性回归
- **回归方程**：  $Y = B_0 + B_1X + \varepsilon$
	- $B_0$：截距（X=0时Y的期望值）
	- $B_1$：斜率（X每变动1单位，Y的变动量）
	- $\varepsilon$：残差（模型无法解释的随机误差）
- **普通最小二乘法OLS**
	- 目标：找到使残差平方和（RSS） 最小的 $B_0$ 和 $B_1$： $\min \sum (Y_i - \hat{Y}_i)^2$
	- 估计公式
	- $$\hat{B}_1 = \frac{Cov(X, Y)}{Var(X)}$$
	- $$\hat{B}_0 = \bar{Y} - \hat{B}_1 \bar{X}$$
	- 其中 $\hat{B}_0, \hat{B}_1$ 是样本估计值，不是总体真实值。
- **线性回归的五个基本假设**
	1. **残差均值为零**：$E[\varepsilon] = 0$
	2. **残差方差为常数**（同方差性，无异方差）
	3. **X的方差大于零**（X是变量，非常数）
	4. **样本独立同分布（IID）**
	5. **无极端值**（避免异常点干扰拟合）
	- 满足这些假设时，OLS估计量具有 **BLUE**（最佳线性无偏估计）性质。
- **非线性模型线性化**
	- 例如：$Y = A X^B$  
	  取对数：$\ln Y = \ln A + B \ln X$
- **虚拟变量（Dummy Variable）**
	- 取值为0或
	- 1，表示是否满足某条件
	- 常用于：分类变量（如性别、市场环境）、评估基金经理的**择时能力**
- **假设检验在线性回归中的应用**
	- **检验斜率是否显著**
		- $H_0: B_1 = 0$（X与Y无线性关系）
		- $H_a: B_1 \ne 0$
	- **检验统计量**
	 $$
		t = \frac{\hat{B}_1}{SE(\hat{B}_1)}
		 $$
	- **判断规则**
		- 若 $p值 < \alpha$ → 拒绝 $H_0$
		- 或若 $|t| > t_{\alpha/2}$ → 拒绝 $H_0$
- **模型评估指标** **$R^2$（决定系数）**
	- 衡量模型拟合优度
	- 在一元线性回归中：  $R^2 = \rho^2$（相关系数的平方）
	- $R^2$ 高不代表因果关系，需结合假设检验判断系数是否显著
### 2. 多元线性回归
- **多元线性回归基本概念**：$Y = B_0 + B_1X_1 + B_2X_2 + \cdots + B_KX_K + \varepsilon$
-  $B_j$ 表示：**在其他变量不变的情况下**， $X_j$ 每变动1单位，Y 的变动量
- **模型复杂度**更高，需考虑变量间的相互影响
- **多元线性回归的假设**
	-  与一元回归相同的假设：
		1. 残差均值为零： $E[\varepsilon] = 0$
		2. 残差方差为常数（同方差）
		3. X 的方差 > 0（X 是变量）
		4. 样本独立同分布（IID）
		5. 无极端值
	- **新增假设**：**解释变量之间不存在完全多重共线性**
		- 任何一个 X 不能是其他 X 的完全线性组合。允许一定程度的相关，但不能是 $\rho = \pm 1$
- **模型拟合优度指标**
	- **总平方和分解**：
		 $$
		\text{TSS} = \text{ESS} + \text{RSS}
		 $$
		- **TSS**：总平方和，Y 的总变异（total）
		- **ESS**：回归平方和，模型解释的变异（explained）
		- **RSS**：残差平方和，模型未解释的变异（residual）
	- **$R^2$（决定系数）**：
	 $$
	R^2 = \frac{ESS}{TSS} = 1 - \frac{RSS}{TSS}
	 $$
		- 表示解释平方和占总平方和的比例
		- **缺点**：增加变量一定会提高  $R^2$，可能导致过拟合
	- **调整  $R^2$**：
	 $$
	\overline{R}^2 = 1 - \frac{RSS/(N-K-1)}{TSS/(N-1)}
	 $$
		- 引入**自由度惩罚**，避免盲目增加变量
		- 性质：
			-  $\overline{R}^2 \leq R^2$
			- 增加变量只有当其真实有效时， $\overline{R}^2$ 才会上升
			- 特定情况下，调整R^2可能小于0
- **假设检验**
	- **单个系数的检验（t检验）**
		-  $H_0: B_j = 0$
		- 检验统计量：
		 $$
		  t = \frac{\hat{B}_j}{SE(\hat{B}_j)}
		 $$
		- 与一元回归方法相同
	
	- **联合假设检验（F检验）**
		-  $H_0: B_1 = B_2 = \cdots = B_K = 0$
		- 检验统计量：
		 $$
		  F = \frac{ESS/K}{RSS/(N-K-1)}
		 $$
		- 若  $F > F_{\alpha}(K, N-K-1)$，则拒绝  $H_0$
		- 用于判断**模型整体是否显著**
- **ANOVA表**

| 来源  | 自由度(df) | 平方和(SS) | 均方(MS)      | F值  |
| --- | ------- | ------- | ----------- | --- |
| 回归  | K       | ESS     | ESS/K       | F   |
| 残差  | N-K-1   | RSS     | RSS/(N-K-1) |     |
| 总计  | N-1     | TSS     |             |     |
- **F值** = MSR / MSE
- **P值**：若 <  $\alpha$，则模型整体显著
- **一元 vs 多元回归对比**

| 项目       | 一元回归           | 多元回归    |
| -------- | -------------- | ------- |
| 自变量数     | 1个             | K ≥ 2个  |
| $R^2$ 计算 | $R^2 = \rho^2$ | 无此关系    |
| 系数解释     | 直接             | 需控制其他变量 |
| 联合检验     | 无              | 有（F检验）  |

### 3. 回归诊断 Regression Diagnostics

| 问题类型  | 主要影响  | 检测方法     | 处理方式      |
| ----- | ----- | -------- | --------- |
| 遗漏变量  | 系数有偏  | 理论分析     | 加入变量      |
| 无关变量  | 模型复杂  | T检验不显著   | 剔除变量      |
| 异方差   | 标准误有偏 | 怀特检验     | 稳健标准误/WLS |
| 多重共线性 | 系数不稳定 | 相关系数/VIF | 剔除变量      |
| 极端值   | 拟合偏差大 | Cook’s D | 删除/转换     |
- **变量问题**
	- **遗漏变量**
		- **定义**：对 Y 有解释力且与 X 相关的变量未被纳入模型
		- **影响**：残差变大；系数估计有偏；模型解释力下降
		- **处理**：根据理论或数据判断是否加入该变量
	
	- **无关变量**
		- **定义**：对 Y 无解释力的变量被纳入模型
		- **影响**：模型复杂度增加；$R^2$ 可能上升，但调整  $R^2$ 下降；不影响其他系数的一致性
		- **处理**：移除无关变量
- **偏差与方差权衡**
	- **偏差**：预测值与真实值的差异
	- **方差**：预测值自身的波动程度
	- **简单模型** → 高偏差，低方差（欠拟合）
	- **复杂模型** → 低偏差，高方差（过拟合）
	- **目标**：找到偏差与方差之间的平衡
- **模型选择方法**
	- **从一般到具体**
		- 开始时纳入所有可能变量
		- 逐步剔除最不显著的变量
		- 直到所有变量均显著为止
	- **M折交叉验证**
		- 将数据分为 M 组
		- 轮流用 M-1 组训练，1 组验证
		- 选择**样本外残差平方和最小**的模型
- **异方差 怀特检验**：不影响无偏性，但影响假设检验
	- **定义与类型：**
		- **广义异方差**：残差方差不是常数
		- **狭义/条件异方差**：残差方差与 X 相关
	-  **影响：**
		- 系数估计仍**无偏、一致**
		- **标准误估计有偏** → 假设检验不可靠
		- 可能增加第一类或第二类错误
	- **检验方法：怀特检验**
		- 构建辅助回归：残差平方 ~ X + X² + 交互项
		- 原假设：无异方差（所有系数为0）
		- 统计量：$N \times R^2 \sim \chi^2$
		- 若拒绝 H₀，则存在异方差
	- **处理方法：**
		- **使用稳健标准误**
		- **数据变换**（如取对数）
		- **加权最小二乘法**
		- **GARCH 模型**（金融时间序列）
- **多重共线性**：多重共线性与遗漏变量是此消彼长的关系
	- **定义：**
		- 自变量之间高度相关（|ρ| > 0.7）
		- 完全共线性：一个变量是其他的线性组合（不允许）
	- **影响：**
		- 系数估计不稳定
		- 标准误变大，T检验不显著
		- 模型整体可能显著（F检验通过）
	- **判断方法：**
		- 常识判断
		- 相关系数矩阵
		- VIF（方差膨胀因子）
	- **处理：**
		- 剔除其中一个高度相关的变量
		- 注意可能引入遗漏变量问题
- **极端值：Cook's D**
	- **极端值**：对回归线影响较大的异常点
	- **识别方法：Cook’s Distance**
		- 衡量某点对回归系数的影响。若 $D > 1$，视为极端值。
		- 公式：
		 $$
		  D_i = \frac{\sum (\hat{Y}_j - \hat{Y}_{j(i)})^2}{K \cdot \text{MSE}}
		 $$
	- **处理**：
		- 检查数据是否录入错误
		- 考虑删除或转换该点
		- 使用稳健回归方法
### 4. 平稳时间序列 Stationary Time Series
- **时间序列**：同一对象在不同时间点的观测（如股票每日收盘价）
- **横截面**：不同对象在同一时间点的观测（如多只股票在某日价格）
- **时间序列的构成**
	- **趋势项**：长期上升或下降趋势
	- **周期性/季节性**：规律性波动
	- **噪声**：去除趋势和周期后的随机波动
- **协方差平稳的三个条件**
	- **均值恒定**： $E[Y_t] = \mu$（不随时间变化）
	- **方差恒定**： $\text{Var}(Y_t) = \gamma_0$（有限常数）
	- **自协方差仅依赖于滞后期**：  $\text{Cov}(Y_t, Y_{t-h}) = \gamma_h$（只与  $h$ 有关，与  $t$ 无关）
- **自协方差与自相关系数**
	- **自协方差**： $\gamma_h = \text{Cov}(Y_t, Y_{t-h})$
	- **自相关系数**：  $$
	  \rho_h = \frac{\gamma_h}{\gamma_0}
	 $$
	- **偏自相关系数**：控制中间变量后，两个时点间的直接相关性
- **白噪声：特殊的时间序列**
	- 均值： $E[\varepsilon_t] = 0$
	- 方差： $\text{Var}(\varepsilon_t) = \sigma^2$
	- 无自相关： $\text{Cov}(\varepsilon_t, \varepsilon_{t-h}) = 0, \forall h \ne 0$
	- 白噪声类型：
		- 弱白噪声：满足上述三个条件
		- 强白噪声：独立同分布
		- 高斯白噪声：服从正态分布的白噪声
	- 白噪声是构建时间序列模型的基础成分
	- **白噪声不一定服从正态分布**
- **AR模型**
	- 自回归模型AR、移动平均模型MA和自回归移动平均模型ARMA
	- **拖尾**：逐渐衰减至0
	- **截断**：某阶后突然接近0 

| 模型        | ACF        | PACF       |                     |
| --------- | ---------- | ---------- | ------------------- |
| AR(p)     | 拖尾衰减       | **p 阶后截断** | - **PACF截尾 → 用AR**  |
| MA(q)     | **q 阶后截断** | 拖尾衰减       | - **ACF截尾 → 用MA**   |
| ARMA(p,q) | 拖尾衰减       | 拖尾衰减       | - **两个都拖尾 → 用ARMA** |
- **模型LBQ检验**
	- 用途：检验残差是否为白噪声
	- 原假设  $H_0$：所有自相关系数为0（是白噪声）
	- 统计量：
 $$
LBQ = N(N+2) \sum_{h=1}^m \frac{\hat{\rho}_h^2}{N-h}
 $$
	- 若  $LBQ > \chi^2_{\alpha}(m)$，拒绝  $H_0$，说明残差非白噪声
- **预测**
	- **AR 模型预测**：
	- 多步预测会逐渐收敛到长期均值
	- 记忆长，预测依赖历史值
	- **MA 模型预测**：
	- 超过 q 步的预测值等于长期均值
	- 记忆短，仅最近残差影响预测
- **单位根检验**：ADF检验步骤
- **非平稳处理**：差分、去趋势、季节性调整

### 5. 非平稳时间序列 Non-Stationary Time Series
- **平稳序列**：已去除趋势和周期性，统计特性不随时间变化
- **非平稳序列**：包含趋势、周期性或随机游走成分
- **非平稳的三个主要来源：**
	- 趋势项 Trend
	- 季节性/周期性 Seasonality  
	- 随机游走/单位根 Random walk
- **趋势项**
	- **线性趋势**
		- 模型：$Y_t = \beta_0 + \beta_1 t + \varepsilon_t$
		- 均值随时间变化 → 违反协方差平稳性
	- **非线性趋势**
		- 多项式趋势（二次、三次等）
		- 在实践中较少使用
	- **对数线性趋势**
		- 模型：$\ln Y_t = \beta_0 + \beta_1 t + \varepsilon_t$
		- 表示**增长率恒定**：$\ln Y_{t+1} - \ln Y_t = \beta_1$
		- 适用于经济金融数据（如GDP增长率）
- **季节性/周期性**
	- **处理方法一：虚拟变量**
		- 为每个季节/月份创建0-1变量
		- 若有S个季节，只能引入S-1个虚拟变量；或：去掉截距项，引入S个虚拟变量
	- **处理方法二：滞后项**
		- 用 $Y_{t-4}$ 表示去年同季度（周期=4），适用于规则周期性数据
		- 虚拟变量的经济学解释：
		- 截距项：基准季节的平均值
		- 系数：各季节与基准季节的差值
- **随机游走和单位根**
	- **随机游走模型**： $Y_t = Y_{t-1} + \varepsilon_t$，其中 $\varepsilon_t$ 是白噪声
	- **特性**：均值恒定、方差随时间增长、不满足协方差平稳（方差非常数）
	- **与AR模型的关系**：
		- 随机游走 = AR(1) 且 $\phi = 1$
		- 当 $|\phi| < 1$ 时平稳，$\phi = 1$ 时为随机游走
- **单位根检验（ADF检验）**
	- **单位根**：
		- 在AR模型中特征根的**绝对值=1**
		- 存在单位根 ⇒ 序列非平稳
	- **单位根检验模型**：
$$
\Delta Y_t = \gamma Y_{t-1} + \sum_{i=1}^p \phi_i \Delta Y_{t-i} + \varepsilon_t
 $$
	 - **假设**：
		- $H_0: \gamma = 0$（存在单位根，非平稳）
		- $H_a: \gamma < 0$（平稳）
	- **检验统计量**：
		- 使用**DF分布**，非标准t分布
		- 若拒绝 $H_0$，则序列平稳
- **非平稳序列的建模策略**
	- **完整模型框架**：$$
Y_t = \text{趋势} + \text{季节性} + \text{噪声}
 $$
	- **噪声部分可用**：AR模型、MA模型  ARMA模型
	- **处理步骤**：
		- 识别并去除趋势
		- 识别并去除季节性
		- 对剩余噪声部分建立ARMA模型
		- 若仍不平稳，考虑随机游走（差分处理）
- **预测方法**
	- **含趋势和季节性的预测**：
		- 趋势部分：外推趋势线
		- 季节性部分：使用虚拟变量或滞后项
		- 噪声部分：用ARMA模型预测
	- **随机游走的预测**：
		- 最佳预测：当前值
		- 长期预测不确定性随 horizon 增加
- **伪回归问题**
	- 两个不相关的非平稳序列可能显示出虚假的相关性
	- 需先检验平稳性，再建立回归模型
- **差分处理**
	- 对随机游走序列，一阶差分可使其平稳：
 $$
\Delta Y_t = Y_t - Y_{t-1} = \varepsilon_t
 $$
-  **总结：非平稳序列处理流程**

| 问题类型 | 检测方法      | 处理方式      |
| ---- | --------- | --------- |
| 趋势项  | 图形观察/回归检验 | 去趋势/使用增长率 |
| 季节性  | 虚拟变量/ACF图 | 季节虚拟变量/差分 |
| 随机游走 | ADF检验     | 一阶差分      |

## 模拟模型、计算收益波动性相关性
### 1. 计算收益波动性相关性
#### 1.1 收益率
- **简单收益率（Simple Return）**
- 公式：$$R_T = \frac{P_T - P_{T-1}}{P_{T-1}}$$
- 适用于短期，计算简便，但忽略时间价值。
- 不同时期的简单收益率不可直接相加或比较。
- **连续复利收益率（对数收益率）**
- 公式：$$r_t = \ln\left(\frac{P_t}{P_{t-1}}\right)$$
- 反映连续复利特性，适用于金融建模。
- 与简单收益率的关系：
 $$
  1 + R_T = e^{r_t}
 $$
- **多期收益率的合成**
- 总收益率 = 各期收益率乘积：
 $$
  1 + R_{总} = (1 + R_1)(1 + R_2)\cdots(1 + R_n)
 $$
- 对数收益率可加：
 $$
  r_{总} = r_1 + r_2 + \cdots + r_n
 $$
#### 1.2 波动性 Volatility
- 波动率是风险的度量，常用标准差估计。
- 样本方差应使用无偏估计（除以 $T-1$）。
- **平方根法则**：在收益率独立同分布的情况下，年化波动率 = 日波动率 ×  $\sqrt{252}$。
- 向日转换：$\sqrt{252}$；向周转换： $\sqrt{52}$；向月转换：$\sqrt{12}$；
- **金融市场数据**多为非正态分布：左偏、肥尾。检验方法：
	- ADF检验（随机游走）
	- BPQ/LBQ（自相关）
	- JB检验（正态性）
- **JB检验（Jarque-Bera Test）**
- 原假设：偏度=0，峰度=3。
- 若统计量 > 临界值，拒绝原假设，即非正态分布。
#### 1.3 相关系数 Correlation
- **线性相关系数 - 皮尔森**，衡量线性关系，对极端值敏感，公式：
$$
  \rho = \frac{\text{Cov}(X,Y)}{\sigma_X \sigma_Y}
 $$
- **非线性相关系数 - 斯皮尔曼等级相关系数**，基于排序数据，对极端值不敏感。公式：
 $$
  \rho_s = 1 - \frac{6 \sum d_i^2}{n(n^2 - 1)}
 $$
- **非相关性系数 -  肯德尔tau系数** ，基于协同组（concordant）与非协同组（discordant）的数量。若数据中存在相等值，则不计入任何一组。公式：
 $$
  \tau = \frac{N_C - N_D}{n(n-1)/2}
 $$
- **三种相关系数比较**
- 皮尔森与斯皮尔曼：数值接近，尤其对正态数据。
- 肯德尔tau：绝对值通常小于前两者，更适合非线性关系。
- 考试重点：三者大小关系（|皮尔森| ≈ |斯皮尔曼| > |肯德尔|）



- 估计收益和波动率
- 金融资产收益率的分布
- 相关性
- 均值回归
### 2. 模拟和Bootstrapping
- **蒙特卡洛和Bootstrapping的区别：**
	- 模拟数据来源不同
	- 蒙特卡洛需要对随机变量的分布做出假设，Bootstrapping不用
	- 两个方法都在预测黑天鹅事件上存在局限
- **蒙特卡洛模拟**：
	- 起源于法国摩纳哥赌城，用于复杂衍生产品定价。用于奇异期权、传统模型（如二叉树、BSM）难以处理的复杂衍生品。
	- 基于随机游走模型，考虑均值（μ）、波动率（σ）和时间间隔（ΔT）；生成多条价格路径，评估未来价格分布（如直方图、PMF图）。
	- 提高模拟精度：增加模拟路径数N，反变量法，控制变量法，抽样技术优化，并行计算。
	- 缺陷： 随机数质量，计算成本，时间成本。
- **bootstrapping方法**：
	- 通过现有数据重复抽样生成新样本，适用于数据量不足的情况。生成的数据与原数据相关，不满足独立同分布。
	- 抽样方法：随机抽样，CBB抽样（固定顺序分组、保证每个数据都被抽到）
	- 适用条件：历史数据与当前情况高度相关；数据质量高。
	- 局限性：原始数据差则生成数据无效；违背“历史重演”假设时失效（如结构突变）。

## 机器学习
### 1. 方法
- 机器学习类型：监督学习、无监督学习、强化学习
- 数据准备（数据标准化、数据清洗）
- 过度拟合与欠拟合
- 样本拆分和准备（训练集、验证集、测试集）
- 非监督式学习（主成分分析PCA、K-means聚类）
- 强化学习
- 自然语言处理
### 2. 评估
- 处理分类数据
- 线性回归拓展（正则化、逻辑回归）
- **正则化**：
	- **岭回归**(L2正则化，惩罚项为系数平方和，系数趋近于0但不等于0) 
	- **LASSO回归**(L1，惩罚项为系数绝对值之和，可将部分系数压缩为0，实现**特征选择**) 
	- **超参数λ**控制正则化强度
- 模型评估
- 监督式学习算法（决策树、集成技术、K近邻、SVM、神经网络）
- **模型评估**：混淆矩阵、准确率、精确率、召回率
- **集成学习**：随机森林、Boosting





